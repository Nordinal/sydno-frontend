import React, { useEffect, useState } from 'react';
import { Select } from 'antd';
import { TChangeConfigProperty } from '../ui/SearhFiltres';
import { instanceApi } from '@/shared/configs/instanceAxios';

const ExploitationType: React.FC<{
  exploitations_type?: string | null;
  changeConfigProperty: TChangeConfigProperty;
}> = ({
  exploitations_type,
  changeConfigProperty
}) => {
    const [exploitationTypeList, setExploitationTypeList] = useState<{ value: string, label: string }[]>();

    useEffect(() => {
      instanceApi.get('/api/selector?exploitationtypes').then(res => {
        const data = res.data.message
        setExploitationTypeList(
          Object.entries(data.exploitation_types as { [x in string]: string })
            .map(([value, label]: [string, string]) => ({
              value,
              label
            }))
        );
      });
    }, []);

    return (
      <>
        <p>Тип эксплуатации</p>
        <Select
          style={{ width: '100%' }}
          value={exploitations_type}
          allowClear
          onChange={(value) => changeConfigProperty<string>('exploitations_type', value)}
          options={exploitationTypeList}
        />
      </>
    )
  }

export default ExploitationType;
